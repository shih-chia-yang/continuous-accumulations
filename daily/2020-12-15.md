# 2020-12-15

## performance counters

[[monitor]](../monitor/monitor.md)

[網頁連結](https://michaelscodingspot.com/performance-counters/)

network counter
[network related performance counter](https://docs.microsoft.com/en-us/windows-server/networking/technologies/network-subsystem/net-sub-performance-counters)

## swagger Open API

[[OpenApi]](../openapi/openapi.md)

- [msdn](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-5.0)

## RPC Style vs. REST Web APIs

[[OpenApi]](../openapi/openapi.md)

- [links](https://blog.jscrambler.com/rpc-style-vs-rest-web-apis/)

## dotnet command

[[dotnet]](../dotnet/dotnet.md)

- [links](https://docs.microsoft.com/zh-tw/dotnet/core/tools/dotnet)

## dotnet core web api practice

[[net core]](../.net%20core/netcore.md)

- [links](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/first-web-api?view=aspnetcore-5.0&tabs=visual-studio-code)

vscode 命令列
創建專案

```text
dotnet new webapi -o TodoApi
cd TodoApi
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.InMemory
code -r ../TodoApi

```

執行命令來信任 `HTTPS` 開發憑證，詳細請參閱[信任 ASP.NET Core HTTPS 開發憑證](https://docs.microsoft.com/zh-tw/aspnet/core/security/enforcing-ssl?view=aspnetcore-5.0&tabs=visual-studio#trust-the-aspnet-core-https-development-certificate-on-windows-and-macos)
如需有關信任 Firefox 瀏覽器的詳細資訊，請參閱[firefox SEC_ERROR_INADEQUATE_KEY_USAGE 憑證錯誤](https://docs.microsoft.com/zh-tw/aspnet/core/security/enforcing-ssl?view=aspnetcore-5.0&tabs=visual-studio#trust-ff)

```text

dotnet dev-certs https --trust

```

swagger可用來產生web api的實用檔和說明頁面，如需swagger的詳細資訊，請參閱[使用 Swagger/OpenAPI ASP.NET Core web API 檔](https://docs.microsoft.com/zh-tw/aspnet/core/tutorials/web-api-help-pages-using-swagger?view=aspnetcore-5.0)

將url：https:\\//localhost:`<port>`/WeatherForecast,回傳json結構數據

- 更新launch url
- 到properties\launchSetting.js開啟，將`launchurl`從swagger改為`api/TodoItems`

- 新增model

```text
 public class TodoItem
    {
        public long Id { get; set; }
        public string Name { get; set; }
        public bool IsComplete { get; set; }
    }
```

新增資料庫內容

- 新增TodoContext類別
- 新增`Dbset<TodoItem>`

在`startup.cs`使用`DI`註冊`DbContext`

scaffold控制器

- 新增scaffolding的nuget套件
- 安裝scaffolding引擎`(dotnet-aspnet-codegenerator)`
- scaffold TodoItemsControllers

```text
dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design
dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet tool install -g dotnet-aspnet-codegenerator
dotnet tool update -g dotnet-aspnet-codegenerator
dotnet aspnet-codegenerator controller -name TodoItemsController -async -api -m TodoItem -dc TodoContext -outDir Controllers

```

[//begin]: # "Autogenerated link references for markdown compatibility"
[dotnet]: ..\dotnet\dotnet.md "dotnet"
[net core]: ..\.net core\.net core.md ".net core"
[//end]: # "Autogenerated link references"