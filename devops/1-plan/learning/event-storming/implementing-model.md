# implementing-model

## technical requirements

- linux(archlinux) [[linux]]
- c# 8.0以上 
- .net 5.0以上 [[netcore]] [[aspnet_core]]
- visual studio code [[vscode]]
- xunit [[xunit]] [[unittests]] [[tdd]]
- sql server 2019 [[sql-server-2019]] [[efcore]]

作業環境為linux，相關command line請自行轉換

## starting up the implementation

1. web application
2. api application
3. unittest 

project structure

    marketplace
    |
    |--src
    |    |--services
    |    |    |--marketplace.infrastructure
    |    |    |--marketplace.domain
    |    |    |--marketplace.api
    |    |--webs
    |         |-university.web
    |--tests
    |    |--marketplace.unittests
    |    |--marketplace.functionaltests
    |--README.md

[[dotnet-sln]]

- 依照結構建立專案
```bash
dotnet new sln -o maketplace ; cd $_ ;mkdir -p src/services src/web tests;touch README.md;cd src/services;dotnet new classlib -o marketplace.infrastructure;dotnet new classlib -o marketplace.domain ; dotnet new webapi -o marketplace.api ; cd ../web ;dotnet new mvc -o marketplace.web ; cd ../../tests ;dotnet new xunit -o marketplace.unittests;dotnet new xunit -o marketplace.functionaltests

```

- 加入方案與專案參考
```bash
dotnet sln add src/services/marketplace.api/marketplace.api.csproj src/services/marketplace.domain/marketplace.domain.csproj src/services/marketplace.infrastructure/marketplace.infrastructure.csproj  src/web/marketplace.web/marketplace.web.csproj tests/marketplace.unittests/marketplace.unittests.csproj tests/marketplace.functionaltests/marketplace.functionaltests.csproj 
```

- 專案由外向內參考，以marketplace.domain為中心
```bash

dotnet add src/services/marketplace.api/marketplace.api.csproj reference src/services/marketplace.domain/marketplace.domain.csproj src/services/marketplace.infrastructure/marketplace.infrastructure.csproj;dotnet add src/services/marketplace.infrastructure/marketplace.infrastructure.csproj reference src/services/marketplace.domain/marketplace.domain.csproj ;dotnet add tests/marketplace.unittests/marketplace.unittests.csproj reference src/services/marketplace.api/marketplace.api.csproj src/services/marketplace.domain/marketplace.domain.csproj src/services/marketplace.infrastructure/marketplace.infrastructure.csproj 
```

## marketplace.domain

[[eventstorming]]

將design-level eventstorming所得到的model轉換為程式碼。
可以從以下的表格發現所有command都是執行關於`Classified Ad`的作業，且有create,remove,publish行為改變classified ad的狀態，即便內容物相同也應視為不同廣告。

entity:一個物件即使同樣的值也視為不同實體，且擁有一系列狀態變化呈現其生命週期。

|actor|command|domain event|
|--|--|--|
|user|Create an ad|Ad Created|
|seller|Change the ad title|Ad title changed|
|seller|Update the ad text|Ad text updated|
|seller|Update the sell price|Ad sell price updated|
|seller|Add picture to ad |Picture added to ad|
|seller,admin|Remove picture from ad|Picture removed from ad|
|seller|Request to publish the ad|



[//begin]: # "Autogenerated link references for markdown compatibility"
[linux]: ../../../7-operate/learning/env/linux/linux.md "Linux"
[netcore]: ../../../2-code/learning/tool/dotnet/netcore.md "netcore"
[aspnet_core]: ../../../2-code/learning/development/aspnet-core/aspnet_core.md "aspnet_core"
[vscode]: ../../../2-code/learning/tool/vscode/vscode.md "Vscode"
[xunit]: ../../../4-test/learning/tools/xunit/xunit.md "xunit"
[unittests]: ../../../2-code/learning/development/aspnet-core/project/unittests/unittests.md "unittests"
[tdd]: ../../../2-code/learning/development/tdd/tdd.md "Tdd"
[sql-server-2019]: ../../../2-code/learning/tool/SqlServer/sql-server-2019.md "Sql Server 2019"
[efcore]: ../../../2-code/learning/tool/Efcore/efcore.md "EfCore"
[dotnet-sln]: ../../../2-code/learning/tool/dotnet/dotnet-sln.md "Dotnet Sln"
[eventstorming]: eventstorming.md "eventstorming"
[//end]: # "Autogenerated link references"