# Pester

- [[Installation]]
- [[Usage]]
## Quick Start
- pester對測試文件使用文件命名約定*.Tests.ps1。文件名稱通常以測試功能命名，並與功能ps1 file同一位置，該文件透過.\ $PSScriptRoot 放置於BeforeAll block提供相對路徑。測試案例按Describe或Context分組，將測試內容寫在It block中，Should 為依據斷言測試條件是否成立判斷測試成功或失敗
````folder
Directory
    |--functionName.ps1
    |--functionName.Tests.ps1
````
````Powershell
BeforeAll{
    .\ $PSScriptRoot functionFile.ps1
}
Describe{
    It 'given what parameters,Should return what result'{

        $Result=functionFile
        $Result | Should -Be 'Expect Value'
    }
}
````
- 使用Invoke-Pester 執行測試Tests.ps1文件 ，-OutputDetails 輸出每個測試結果。
````Powershell
Invoke-Pester *.Tests.ps1 file path -OutputDetails
````

## how tests break
- 受測方法沒有正確執行。測試的正確方式
- 受測方法正確執行，但測試方法錯誤。錯誤的測試方式

## keywords

- Describe
  將測試方法框列為一個群組，可以在同一個檔案中擁有一個或以上的Describe，也可以巢狀結構。
- Context 與Describe另一個相似的關鍵字是Context，這兩者功能幾乎一樣，一般來說top-level block是describe，以受測功能命名，如果需要context block可以表示測試功能的測試情境，而被內嵌在describe之中，如例。
````Powershell
Describe 'Get-Planet' {
    Context 'no parameters' {
        It 'lists all 8 planets' {
            # ..
        }

        It 'lists them in the correct order' { 
            # ...
        }
    }

    Context "with -Filter" { 
        It 'filters based on planet Name' {
            # ...
        }
    }
}
````
- BeforeAll:我們希望在各個測試之間共享參數與程式，BeforeAll block 可以在test之前執行，通常位於ps1 file的開頭或是Describe之前
- AfterAll:會在最後執行這個區隔
- BeforeEach:將會在每個test block之前執行
- AfterEach：將會在每個test block之後執行



[//begin]: # "Autogenerated link references for markdown compatibility"
[Installation]: installation.md "Installation"
[Usage]: usage.md "Usage"
[//end]: # "Autogenerated link references"