# controller

負責接收 http request ，協調 model 與 view，並將最終輸出回應給使用者

Convention:

- 位於 Controllers 資料夾中
- 繼承 Microsoft.AspNetCore.Mvc.Controller

controller 初始化，符合以下其中一個要件

- Controller 類別名稱須以 Controller 結尾
- Controller 繼承的類別是以 Controller 結尾
- 類別以`[Controller]`屬性裝飾

| 屬性                  | 說明                                                       |
| --------------------- | ---------------------------------------------------------- |
| ControllerContext     | 取得或設定控制器內容                                       |
| HttpContext           | 取得關於個別 HTTP 要求的 HTTP 特定資訊                     |
| MetadataProvider      | 取得或設定 IModelMetadataProvider                          |
| ModelBinderFactory    | 取得或設定 IModelBinderFactory                             |
| ModelState            | 取得模型狀態字典物件，這個物件包含模型和模型繫結驗證的狀態 |
| ObjectValidator       | 取得或設定 IObjectModelValidator                           |
| ProblemDetailsFactory | 產生 ProblemDetails 或 ValidationProblemDetails 之 Factory |
| Request               | 取得目前 HTTP 要求的 HttpRequestBase 物件                  |
| Response              | 取得目前 HTTP 回應的 HttpResponseBase 物件                 |
| RouteDate             | 取得目前要求的路由資料                                     |
| TempData              | 取得或設定暫存資料的字典                                   |
| TempDataProvider      | 取得暫存資料提供者物件，這個物件用於儲存下一個要求的資料   |
| Url                   | 取得 URL Helper 物件，使用路由來產生 URL                   |
| ViewBag               | 取得動態檢視資料字典                                       |
| ViewData              | 取得或設定檢視資料的字典                                   |

## Action 設計限制

- 必須宣告為 public，不得為 private 或 protected
- 不得宣告為 static
- 不能以`[NoAction]`裝飾
- 不能為擴充方法
- 不能有未繫結的泛型型別參數
- 不能包含 ref 或 out 參數
- Action 無法單憑參數進行多載，必須套用 Accept VerbsAttribute 屬性，讓 Action 的意義清楚，才能多載。

## ActionResult 動作結果類型

| ActionResult           | Controller 對應的方法           | 說明                                                                  |
| ---------------------- | ------------------------------- | --------------------------------------------------------------------- |
| ViewResult             | View()                          | 回應 ViewResult 物件，用來將 View 轉譯輸出到 Response 資料流          |
| PartialViewResult      | PartialView()                   | 回傳 PartialViewResult 物件，轉譯 PartialView 內容                    |
| ContentResult          | Content()                       | 回傳文字訊息內容，可選擇性指定內容類型及內容編碼                      |
| EmptyResult            | new EmptyResult()/ null         | 不回傳任何值，代表沒有 Response                                       |
| JsonResult             | Json()                          | 回傳一個序列化 json 物件                                              |
| FileResult             | File()                          | 回傳 File 檔案內容                                                    |
| RedirectResult         | Redirect() /RedirectPermanent() | 以 url 網址重新導向到另一個 Action，發出 Http 301/302                 |
| RedirectToActionResult | RedirectToAction()              | 導向另一個 Action 方法，這方法可為同一個 controller 或不同 controller |
| RedirectToRouteResult  | RedirectToRoute()               | 執行網頁轉向，方式是使用路由名稱與路由參數達成                        |

|StatusCodeResult | new StatusCodeResult() |用來回傳http 狀態碼|
|ObjectResult| new ObjectResult() | 回應一個json物件與狀態代碼給瀏覽器|

## ViewComponent

## View

[[view]]

## ValidationProblem

## UnProcessableEntity

## UnAuthorized

## TryValidateModel

## TryUpdateModelAsync

## StatusCode

## SignOut

## SignIn

## RedirectToRoutePreserve

## RedirectToRoutePermanent

## RedirectToRoute

## RedirectToPagePreserve

## RedirectToPagePermanent

## RedirectToPage

## RedirectToActionPreserve

## RedirectToActionPermanent

## RedirectToAction

## RedirectPreserveMethod

## RedirectPermanentPreserve

## RedirectPermanent

## Redirect

## Accepted

## AcceptedAtAction

## AcceptedAtRoute

## BadRequest

## Challenge

## Conflict

## Content

## CreatedAtAction

## CreatedAtRoute

## Dispose

## File

## Forbid

## Json

## LocalRedirect

## LocalRedirectPreserve

## NoContent

## NoFound

## Ok

## OnActionExecuted

## OnActionExecuting

## OnActionExecutionAsync

## PartialView

## PhysicalFile

## Problem

[//begin]: # "Autogenerated link references for markdown compatibility"
[view]: view.md "view"
[//end]: # "Autogenerated link references"
