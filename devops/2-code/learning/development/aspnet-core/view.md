# view

[檔案分類](#檔案分類)

[資料夾分類](#資料夾分類)

[傳遞資料機制](#傳遞資料機制)

[ViewData屬性](#ViewData屬性)

[[razor]]

[[taghelper]]

[[viewcomponent]]

[[bootstrap]]

負責視覺化內容與 ui 介面，副檔名為.cshtml，統一歸類在 Views 資料夾，分為三類

## 檔案分類

- View : 一般網頁內容及 ui 的設定，包含 html、css、javascript、Razor 語言。

- Partial View : 將網頁一小堆可重複的部份獨立成一個.cshtml，提供給 view or Action 使用

- Layout : 等同 ASP.NET 的 Master Page 版面，是網站的樣板，含有 Navigation、Header、Footer、SiderBar、Jquery、Bootstrap、css，將網站固定的部份抽離讓所有 view 共用，簡化 view 的設計

## 資料夾分類

- 與 Controller 對應的資料夾 : 提供該 Controller 所需要的頁面
- Shared 資料夾 : 存放網站共用的佈局檔、partial view 或 custom error page
- ViewImports.cshtml : 設定 Views共享的指示詞，預設使用@using 匯入每個view會用到的命名空間，使用@AddTagHelper加入TagHelper
- ViewStart.cshtml : 預設layout為_layout.cshtml，所有的view都會套用，想要更換整個網站的預設佈局檔，請修改此檔。

1. 默認與Action同名的view

```aspx-csharp
return View()
```

2. 明確指定View名稱
```aspx-csharp
return View(Index)
```
3. 指定完整路徑和檔案，須加上.cshtml
```aspx-csharp
return View("~/Views/Test/Index.cshtml");
```

## 傳遞資料機制

|方式|說明|時機與限制|
|--|--|--|
|ViewData| ViewDataDictionary，key-value pair dictionary| 用於action傳遞一次性資料給view。若網頁轉向便會消失，無法跨controller/action傳遞資料|
|ViewBag| dynamic動態型別 property，內部為DynamicViewDataDictionary|同上|
|Model| 廣義資料模型，像是集合、陣列、物件皆可作為model傳遞至view|同上|
|TempData| 為ITempDataDictionary，key-value pair dictionary|
用於跨controller/action傳遞資料，但資料儲存在session/Cookie中，不受網頁轉向而消失

- ViewData資料需要做轉型動作，string型別除外。

## ViewData屬性

在controller宣告property屬性後，再加上`[ViewData]`，所有action可以直接使用property屬性設定ViewData

```aspx-csharp

[ViewData]
public string Gender {get;set;}

public IActionResult Index()
{
    ViewData["name"]="test";
    Gender="Male";
    return View();
}

```

```html
<p>@ViewData["Gender"]</p>
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[razor]: razor.md "razor"
[taghelper]: taghelper.md "taghelper"
[viewcomponent]: viewcomponent.md "viewcomponent"
[bootstrap]: bootstrap.md "bootstrap"
[//end]: # "Autogenerated link references"